<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiksight</title>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.12/dist/full.min.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', path='img/Q-favicon.png') }}" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    .user-msg {
      display: flex;
      justify-content: flex-end;
      margin-top: 1.5rem;
    }

    .user-msg>div {
      background-color: rgb(243, 244, 246);
      padding: 0.4rem 1rem;
      border-radius: 1.1rem;
      display: inline-block;
      max-width: 75%;
    }

    .ai-msg {
      margin-top: 1.5rem;
      color: rgb(17, 24, 39);
      font-size: 1rem;
    }
  </style>

</head>

<body class="bg-base-100 flex flex-col items-center justify-center min-h-screen p-4">

  <nav class="w-full bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16 items-center">
        <!-- Logo Area -->
        <div class="flex items-center gap-2">
          <!-- Placeholder for Logo Icon -->
          <span class="font-bold text-xl text-cyan-900 tracking-tight">Quiksight</span>
        </div>
      </div>
    </div>
  </nav>




  <div class=" mt-4 bg-card rounded-2xl w-full border border-border p-6 max-w-md mx-auto shadow-sm">

    <div class="card-body p-6">
      <!-- File Info Header -->
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#32a3a3"
          class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
        </svg>


        <h3 class="text-lg font-medium text-gray-900">{{file_name}}</h3>
      </div>

      <!-- File Metadata -->
      <div class="space-y-3 mb-4">
        <div class="flex justify-between items-center">
          <span class="text-[13px] text-gray-500">Extension</span>
          <span class="badge bg-cyan-100 text-cyan-900 border-none text-xs font-medium px-2.5 py-1">
            {{file_extension}}
          </span>

        </div>
        <div class="flex justify-between items-center">
          <span class="text-[13px] text-gray-500">File Size</span>
          <span class="text-[13px] font-medium text-gray-700">{{file_size}}</span>

        </div>
        <div class="flex justify-between items-center">
          <span class="text-[13px] text-gray-500">Upload Date</span>
          <span class="text-[13px] font-medium text-gray-700">{{upload_date}}</span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-[13px] text-gray-500">Upload Time</span>
          <span class="text-[13px] font-medium text-gray-700">{{upload_time}}</span>
        </div>
      </div>

      <!-- Divider -->
      <div class="divider before:bg-cyan-700 after:bg-cyan-700 my-4"></div>

      <!-- Data Statistics -->
      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="text-center">
          <div class="text-2xl font-medium text-gray-900">{{num_rows}}</div>
          <div class="text-xs text-gray-500 uppercase tracking-wide">Rows</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-medium text-gray-900">{{num_columns}}</div>
          <div class="text-xs text-gray-500 uppercase tracking-wide">Columns</div>
        </div>
      </div>

    </div>
  </div>


  <!-- PREVIEW ROWS -->
  <div class="w-full max-w-5xl mx-auto bg-white rounded-2xl shadow-sm p-2 mt-4 mb-5 border border-gray-200">


    <!-- Header Section -->
    <div class="flex items-center gap-2 mb-4">
      <h1 class="text-lg font-semibold text-gray-800">Data Preview</h1>
      <span class="text-xs text-gray-500">
        (showing first {{preview_rows|length}} of {{num_rows}} rows)
      </span>
    </div>

    <!-- Table Container -->
    <div class="overflow-x-auto">
      <table class="table table-zebra table-pin-rows text-sm">

        <thead class="bg-gray-50 text-gray-500 font-light text-sm tracking-wider">

          <tr>
            {% for col in columns %}
            <th class="py-2 px-3">{{ col }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for row in preview_rows %}
          <tr>
            {% for col in columns %}
            <td class="py-2 px-3">
              {% if row[col] is none or row[col] != row[col] or row[col] == '' %}
              <span class="text-gray-400 italic">N/A</span>
              {% elif row[col] | string | length > 60 %}
              <div class="tooltip tooltip-bottom text-left" data-tip="{{ row[col] }}">
                <span class="truncate max-w-xs block">{{ row[col] }}</span>
              </div>
              {% else %}
              {{ row[col] }}
              {% endif %}
            </td>
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  <!-- PREVIEW ROWS -->


  <!-- Divider between preview and chat -->
  <div class="w-full max-w-5xl mx-auto mt-10 mb-6 flex items-center gap-4">
    <div class="flex-1 h-px bg-gradient-to-r from-transparent via-[#14B8A6] to-transparent"></div>
    <span class="text-xs font-medium text-gray-400 uppercase tracking-widest">Chat</span>
    <div class="flex-1 h-px bg-gradient-to-r from-transparent via-[#14B8A6] to-transparent"></div>
  </div>


  <!-- Chat Container -->
  <div
    class="w-full max-w-4xl flex flex-col gap-4 mb-3 border border-gray-200 rounded-2xl bg-white shadow-sm overflow-hidden"
    id="chat-container">


    <!-- Messages -->
    <div id="chat-messages" class="flex flex-col p-6 bg-base-100 overflow-y-auto max-h-[70vh]">
      <!-- User and AI chats appear here -->
    </div>


    <!-- Input Bar -->
    <div class="bg-white rounded-[28px] shadow-md p-2 grid"
      style="grid-template-columns: auto 1fr auto; grid-template-rows: 1fr auto; border: solid 0.5px lightgray;">
      <!-- TEXTAREA INPUT -->
      <div style="grid-area:1/2/2/3" class="min-h-[44px]">
        <textarea id="message-input"
          class="w-full resize-none border-0 outline-none p-2 leading-6 h-auto overflow-hidden max-h-[10.5rem]" rows="1"
          placeholder="Talk to your data"></textarea>
      </div>

      <!-- SEND BUTTON -->
      <div style="grid-area:2/1/3/4;" class="w-full flex justify-end mt-0">
        <button id="send-btn" disabled class="flex items-center justify-center w-9 h-9 rounded-full
         bg-gray-300 cursor-not-allowed transition">

          <svg class="w-[31px] h-[31px] text-gray-800 dark:text-white" aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
              d="M12 6v13m0-13 4 4m-4-4-4 4" />
          </svg>
        </button>
      </div>

    </div>




  </div>

  <script src="static/js/chat.js?v={{ cache_buster }}"> </script>

</body>

</html>